<div class="row">
  <div class="col-xs-9">
    <h2><%= @post.title %></h2>
    <p>by <b><%= @post.author %></b> on <b><%= @post.created_at.to_formatted_s(:long) %></b> - <%= link_to pluralize(@post.comments.length, "comment"), "#comments" %></p>
    <div class="row">
      <div class="col-xs-9">
        <p><%= @post.text %></p><br>
        <% if (!current_user.nil? && @post.user_id == current_user.id) %>
        <%= link_to 'Edit Post', edit_post_path(@post.id), class: "btn btn-default"%>
        <%= link_to 'Delete Post', "#{post_path(@post.id)}/delete", class: "btn btn-default"%>
        <% end %>
      </div>
    </div>
    <hr>
  </div>
</div>

<div class="row">
  <div class="col-xs-9">
    <h4>Leave a comment</h4>
    <%= form_for(@comment) do |f| %>
      <%= render 'shared/error_messages', object: f.object %>

      <%= f.hidden_field 'id', value: @post.id %>

      <%= f.label :user, 'Name' %>
      <%= f.text_field :user, class: "form-control" %><br />
    
      <%= f.label :text, 'Comment' %>
      <%= f.text_area :text, rows: '5', class: "form-control" %><br />

      <%= f.submit "Submit Comment", class: "btn btn-large btn-primary" %>
      <br><br><br>
    <% end %>
  </div>
</div>

<div class="row">
  <div class="col-xs-9">
    <a name="comments"></a>
    <h4>Comments</h4>
    <% if !@post.comments.any? %>
      <br>
      <p>No comments :(</p>
      <% end %>
  </div>
</div>

<div class="row">
  <% @post.comments.reverse.each do |comment| %>
    <div class="col-xs-9 comment">
      <p><b><%= comment.user %></b></p>
      <p><%= comment.text %></p>
    </div>
  <% end %>
</div>

